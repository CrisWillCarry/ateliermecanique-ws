@startuml
title UpdateAppointmentByAppointmentId Design-Level Sequence Diagram

actor Customer

participant ReactApplication as "<<View>>\nReactApplication"
participant CustomerAppointmentDetailsPage as "<<View>>\nCustomerAppointmentDetailsPage"
participant AppointmentController as "<<Controller>>\nAppointmentController"
participant AppointmentService as "<<Service>>\nAppointmentService"
participant AppointmentServiceImpl as "<<Service>>\nAppointmentServiceImpl"
participant AppointmentRepository as "<<Repository>>\nAppointmentRepository"
participant AppointmentResponseMapper as "<<Mapper>>\nAppointmentResponseMapper"

Customer -> ReactApplication: Navigate to Update Appointment Page
activate ReactApplication

ReactApplication -> CustomerAppointmentDetailsPage: Render()
activate CustomerAppointmentDetailsPage

CustomerAppointmentDetailsPage -> AppointmentController: PUT /api/v1/appointments/{appointmentId}
activate AppointmentController

AppointmentController -> AppointmentService: updateAppointmentById(appointmentId, appointmentRequestModel)
activate AppointmentService

AppointmentService -> AppointmentServiceImpl: updateAppointmentById(appointmentId, appointmentRequestModel)
activate AppointmentServiceImpl

AppointmentServiceImpl -> AppointmentRepository: findById(appointmentId)
activate AppointmentRepository
AppointmentRepository --> AppointmentServiceImpl: Appointment
deactivate AppointmentRepository

AppointmentServiceImpl -> AppointmentRepository: save(updatedAppointment)
activate AppointmentRepository
AppointmentRepository --> AppointmentServiceImpl: Appointment
deactivate AppointmentRepository

AppointmentServiceImpl -> AppointmentResponseMapper: entityToResponseModel(updatedAppointment)
activate AppointmentResponseMapper
AppointmentResponseMapper --> AppointmentServiceImpl: AppointmentResponseModel
deactivate AppointmentResponseMapper

AppointmentServiceImpl --> AppointmentService: AppointmentResponseModel
deactivate AppointmentServiceImpl

AppointmentService --> AppointmentController: AppointmentResponseModel
deactivate AppointmentService

AppointmentController --> CustomerAppointmentDetailsPage: AppointmentResponseModel
deactivate AppointmentController

CustomerAppointmentDetailsPage --> ReactApplication: Display Update Confirmation
deactivate CustomerAppointmentDetailsPage

ReactApplication --> Customer: Confirm Update
deactivate ReactApplication

@enduml
